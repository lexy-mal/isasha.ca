<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Realistic Shark Swimming</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #00334d;
    }
    canvas { display: block; }
  </style>
</head>
<body>

<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

let sharkX = -250;
let sharkY = canvas.height * 0.55;
const sharkSpeed = 3.2;

let fishAlive = true;
let fishX = canvas.width * 0.75;
let fishY = canvas.height * 0.55 + 20;
let lastEat = 0;

//------------------------------------
// BACKGROUND
//------------------------------------
function drawWater(t) {
  const g = ctx.createLinearGradient(0, 0, 0, canvas.height);
  g.addColorStop(0, "#004f6f");
  g.addColorStop(0.5, "#00708f");
  g.addColorStop(1, "#003049");
  ctx.fillStyle = g;
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Light rays
  ctx.strokeStyle = "rgba(255,255,255,0.04)";
  ctx.lineWidth = 1;
  for (let i = 0; i < 5; i++) {
    ctx.beginPath();
    ctx.moveTo(i * canvas.width / 5 + 40, -50);
    ctx.lineTo(i * canvas.width / 5 - 120, canvas.height);
    ctx.stroke();
  }
}

//------------------------------------
// REALISTIC SHARK
//------------------------------------
function drawRealisticShark(x, y, t) {
  ctx.save();
  ctx.translate(x, y);

  const bodyLength = 220;
  const bodyHeight = 60;

  const tailWave = Math.sin(t * 0.008) * 18;
  const finWave  = Math.sin(t * 0.008) * 6;

  // BODY (smooth torpedo)
  const gradient = ctx.createLinearGradient(-bodyLength/2, -40, bodyLength/2, 40);
  gradient.addColorStop(0, "#6f8b99");
  gradient.addColorStop(0.5, "#97a8b0");
  gradient.addColorStop(1, "#4e6877");

  ctx.fillStyle = gradient;
  ctx.strokeStyle = "#263840";
  ctx.lineWidth = 3;

  ctx.beginPath();
  ctx.moveTo(-bodyLength/2, 0);
  ctx.quadraticCurveTo(0, -bodyHeight/1.2, bodyLength/2, 0);
  ctx.quadraticCurveTo(0, bodyHeight/1.2, -bodyLength/2, 0);
  ctx.closePath();
  ctx.fill();
  ctx.stroke();

  //------------------------------------
  // GILLS
  //------------------------------------
  ctx.strokeStyle = "rgba(0,0,0,0.4)";
  ctx.lineWidth = 2;
  for (let i = 0; i < 4; i++) {
    ctx.beginPath();
    ctx.moveTo(bodyLength * 0.17 - i * 10, -8);
    ctx.quadraticCurveTo(bodyLength * 0.17 - i * 10 + 5, 0, bodyLength * 0.17 - i * 10, 8);
    ctx.stroke();
  }

  //------------------------------------
  // DORSAL FIN
  //------------------------------------
  ctx.fillStyle = "#637985";
  ctx.beginPath();
  ctx.moveTo(-20, -bodyHeight/2);
  ctx.lineTo(25, -bodyHeight - 45 + finWave);
  ctx.lineTo(50, -bodyHeight/2);
  ctx.closePath();
  ctx.fill();
  ctx.stroke();

  //------------------------------------
  // SIDE FIN
  //------------------------------------
  ctx.beginPath();
  ctx.moveTo(-20, 10);
  ctx.lineTo(-70, 40 + finWave);
  ctx.lineTo(10, 35);
  ctx.closePath();
  ctx.fill();
  ctx.stroke();

  //------------------------------------
  // TAIL
  //------------------------------------
  ctx.beginPath();
  ctx.moveTo(-bodyLength/2, 0);
  ctx.lineTo(-bodyLength/2 - 55, -35 + tailWave);
  ctx.lineTo(-bodyLength/2 - 55, 35 + tailWave);
  ctx.closePath();
  ctx.fill();
  ctx.stroke();

  //------------------------------------
  // HEAD / SNOUT
  //------------------------------------
  ctx.fillStyle = gradient;
  ctx.beginPath();
  ctx.moveTo(bodyLength/2, 0);
  ctx.quadraticCurveTo(bodyLength/2 + 45, -12, bodyLength/2 + 55, 0);
  ctx.quadraticCurveTo(bodyLength/2 + 45, 12, bodyLength/2, 0);
  ctx.fill();
  ctx.stroke();

  //------------------------------------
  // EYE
  //------------------------------------
  ctx.fillStyle = "white";
  const eyeX = bodyLength/3 + 50;
  const eyeY = -15;
  ctx.beginPath();
  ctx.arc(eyeX, eyeY, 8, 0, Math.PI * 2);
  ctx.fill();
  ctx.stroke();

  ctx.fillStyle = "black";
  ctx.beginPath();
  ctx.arc(eyeX + 2, eyeY, 4, 0, Math.PI * 2);
  ctx.fill();

  //------------------------------------
  // MOUTH (more realistic curve)
  //------------------------------------
  ctx.strokeStyle = "#000";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(bodyLength/3 + 30, 5);
  ctx.quadraticCurveTo(bodyLength/3 + 60, 22, bodyLength/3 + 90, 5);
  ctx.stroke();

  ctx.restore();
}

//------------------------------------
// FISH
//------------------------------------
function drawFish(x, y, t) {
  if (!fishAlive) return;

  ctx.save();
  ctx.translate(x, y);

  const wiggle = Math.sin(t * 0.02) * 5;

  ctx.fillStyle = "#ffcc4d";
  ctx.strokeStyle = "#a0741c";
  ctx.lineWidth = 2;

  // Body
  ctx.beginPath();
  ctx.ellipse(0, 0, 30, 14, 0, 0, Math.PI * 2);
  ctx.fill();
  ctx.stroke();

  // Tail
  ctx.beginPath();
  ctx.moveTo(30, 0);
  ctx.lineTo(45, -14 + wiggle);
  ctx.lineTo(45, 14 + wiggle);
  ctx.closePath();
  ctx.fill();
  ctx.stroke();

  // Eye
  ctx.fillStyle = "#fff";
  ctx.beginPath();
  ctx.arc(-12, -3, 3, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = "#000";
  ctx.beginPath();
  ctx.arc(-11, -3, 1.5, 0, Math.PI * 2);
  ctx.fill();

  ctx.restore();
}

//------------------------------------
// ANIMATION LOOP
//------------------------------------
function loop(t) {
  drawWater(t);

  // Move shark
  sharkX += sharkSpeed;
  sharkY = canvas.height * 0.55 + Math.sin(t * 0.0015) * 25;

  if (sharkX > canvas.width + 260) {
    sharkX = -260;
    fishAlive = true;
  }

  // Fish movement
  if (fishAlive) {
    fishX -= 1;
    fishY += Math.sin(t * 0.002) * 0.5;
    if (fishX < -40) fishX = canvas.width + 40;
  } else {
    if (t - lastEat > 2000) {
      fishAlive = true;
      fishX = canvas.width * 0.75;
    }
  }

  // Collision â†’ eat fish
  if (fishAlive) {
    const dx = sharkX - fishX;
    const dy = sharkY - fishY;
    if (Math.hypot(dx, dy) < 85) {
      fishAlive = false;
      lastEat = t;
    }
  }

  drawFish(fishX, fishY, t);
  drawRealisticShark(sharkX, sharkY, t);

  requestAnimationFrame(loop);
}

requestAnimationFrame(loop);
</script>

</body>
</html>